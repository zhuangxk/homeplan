"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
Page({
    data: {
        bill: {},
        downloadHost: 'https://oss.toko.wang/',
        fileList: []
    },
    onPreviewImage: function () {
        var fileList = this.data.fileList;
        wx.previewImage({
            urls: fileList,
            current: fileList[0],
            fail: function () {
                wx.showToast({ title: '预览图片失败', icon: 'none' });
            }
        });
    },
    onLoad: function () {
        var _this = this;
        var eventChannel = this.getOpenerEventChannel();
        eventChannel.on('acceptDataFromOpenerPage', function (data) {
            var downloadHost = _this.data.downloadHost;
            var bill = data.bill;
            var fileList = [];
            bill.Pic1 && fileList.push(downloadHost + bill.Pic1.file_name);
            bill.Pic2 && fileList.push(downloadHost + bill.Pic2.file_name);
            _this.setData({
                bill: bill,
                billTime: new Date(bill.bill_time).toLocaleString(),
                fileList: fileList,
            });
        });
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlsbF9kZXRhaWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJiaWxsX2RldGFpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksQ0FBQztJQUNILElBQUksRUFBRTtRQUNKLElBQUksRUFBRSxFQUFlO1FBQ3JCLFlBQVksRUFBRSx3QkFBd0I7UUFDdEMsUUFBUSxFQUFFLEVBQWM7S0FDekI7SUFDRCxjQUFjLEVBQWQ7UUFFVSxJQUFBLDZCQUFRLENBQWU7UUFFL0IsRUFBRSxDQUFDLFlBQVksQ0FBQztZQUNaLElBQUksRUFBRSxRQUFRO1lBQ2QsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDcEIsSUFBSTtnQkFDQSxFQUFFLENBQUMsU0FBUyxDQUFDLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztZQUNwRCxDQUFDO1NBQ0osQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUNELE1BQU0sRUFBRTtRQUFBLGlCQWtCUDtRQWhCQyxJQUFNLFlBQVksR0FBRyxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQTtRQUlqRCxZQUFZLENBQUMsRUFBRSxDQUFDLDBCQUEwQixFQUFFLFVBQUEsSUFBSTtZQUN0QyxJQUFBLHNDQUFZLENBQWU7WUFDbkMsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQTtZQUN0QixJQUFNLFFBQVEsR0FBRyxFQUFFLENBQUE7WUFDbkIsSUFBSSxDQUFDLElBQUksSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFBO1lBQzlELElBQUksQ0FBQyxJQUFJLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtZQUM5RCxLQUFJLENBQUMsT0FBTyxDQUFDO2dCQUNYLElBQUksRUFBRyxJQUFJO2dCQUNYLFFBQVEsRUFBRSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsY0FBYyxFQUFFO2dCQUNuRCxRQUFRLEVBQUUsUUFBUTthQUNuQixDQUFDLENBQUE7UUFDSixDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJQYWdlKHtcclxuICBkYXRhOiB7XHJcbiAgICBiaWxsOiB7fSBhcyBBbnlPYmplY3QsXHJcbiAgICBkb3dubG9hZEhvc3Q6ICdodHRwczovL29zcy50b2tvLndhbmcvJyxcclxuICAgIGZpbGVMaXN0OiBbXSBhcyBBbnlBcnJheVxyXG4gIH0sXHJcbiAgb25QcmV2aWV3SW1hZ2UoKTogdm9pZCB7XHJcbiAgICAvLyBjb25zdCB7IHVybCB9ID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0O1xyXG4gICAgY29uc3QgeyBmaWxlTGlzdCB9ID0gdGhpcy5kYXRhO1xyXG5cclxuICAgIHd4LnByZXZpZXdJbWFnZSh7XHJcbiAgICAgICAgdXJsczogZmlsZUxpc3QsXHJcbiAgICAgICAgY3VycmVudDogZmlsZUxpc3RbMF0sXHJcbiAgICAgICAgZmFpbCgpIHtcclxuICAgICAgICAgICAgd3guc2hvd1RvYXN0KHsgdGl0bGU6ICfpooTop4jlm77niYflpLHotKUnLCBpY29uOiAnbm9uZScgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSxcclxuICBvbkxvYWQ6IGZ1bmN0aW9uKCl7XHJcbiAgICBcclxuICAgIGNvbnN0IGV2ZW50Q2hhbm5lbCA9IHRoaXMuZ2V0T3BlbmVyRXZlbnRDaGFubmVsKClcclxuICAgIC8vIGV2ZW50Q2hhbm5lbC5lbWl0KCdhY2NlcHREYXRhRnJvbU9wZW5lZFBhZ2UnLCB7ZGF0YTogJ3Rlc3QnfSk7XHJcbiAgICAvLyBldmVudENoYW5uZWwuZW1pdCgnc29tZUV2ZW50Jywge2RhdGE6ICd0ZXN0J30pO1xyXG4gICAgLy8g55uR5ZCsYWNjZXB0RGF0YUZyb21PcGVuZXJQYWdl5LqL5Lu277yM6I635Y+W5LiK5LiA6aG16Z2i6YCa6L+HZXZlbnRDaGFubmVs5Lyg6YCB5Yiw5b2T5YmN6aG16Z2i55qE5pWw5o2uXHJcbiAgICBldmVudENoYW5uZWwub24oJ2FjY2VwdERhdGFGcm9tT3BlbmVyUGFnZScsIGRhdGEgPT4ge1xyXG4gICAgICBjb25zdCB7IGRvd25sb2FkSG9zdCB9ID0gdGhpcy5kYXRhO1xyXG4gICAgICBjb25zdCBiaWxsID0gZGF0YS5iaWxsXHJcbiAgICAgIGNvbnN0IGZpbGVMaXN0ID0gW11cclxuICAgICAgYmlsbC5QaWMxICYmIGZpbGVMaXN0LnB1c2goZG93bmxvYWRIb3N0ICsgYmlsbC5QaWMxLmZpbGVfbmFtZSlcclxuICAgICAgYmlsbC5QaWMyICYmIGZpbGVMaXN0LnB1c2goZG93bmxvYWRIb3N0ICsgYmlsbC5QaWMyLmZpbGVfbmFtZSlcclxuICAgICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgICBiaWxsOiAgYmlsbCxcclxuICAgICAgICBiaWxsVGltZTogbmV3IERhdGUoYmlsbC5iaWxsX3RpbWUpLnRvTG9jYWxlU3RyaW5nKCksXHJcbiAgICAgICAgZmlsZUxpc3Q6IGZpbGVMaXN0LFxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9LFxyXG59KVxyXG5cclxuZXhwb3J0IHt9Il19